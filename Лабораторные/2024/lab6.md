### Лабораторная работа номер 6
----------------------------------


Критериями выполнения базовой части являются:
- Реализация программы, возможность ее запуска, ее взаимодействие с пользователем.
- Выполнение всех пунктов без указанного в скобках слова "Усложнение".

Критериями усложненного варианта является:
- Реализация пункта с припиской "Усложненный вариант".
- Все действия реализованы в виде отдельных функций с описанием их документационных строк.

!!! Для всех классов предполагается перегрузка оператора вывода в поток через дружественную функцию и вывод информации о классе и объекте в формате `<Наименование класса> {<набор информации характеризующей объект>}`

### Вариант 1

Вам необходимо реализовать класс оружия, который может стрелять по разному виду мишеней. При этом:
- У оружия есть магазин и он заполняется до максимума патронами.
- Огонь может вестись одиночными или очередями, при этом цель соответственно может получать урон либо от каждого патрона по очереди при стрельбе одиночными, либо от группы патронов при стрельбе очередью.
- Шанс попадания по цели лежит в границах от 0 до 1(double) и рассчитывается на основании параметров цели (зависит от видимости мишени и ее движения).
- При стрельбе генерируется случайное число в том же интервале значений, которое сверяется с шансом и если оно больше, то попадание засчитывается, меньше не засчитывается.
- Мишень может иметь ряд характеристик: расстояние до мишени на стрельбище, размер (площадь мишени, рассчитывается в зависимости от геометрии мишени, определяется разработчиком), форма мишени, материал (отсвечивает или нет), видимость мишени на стрельбище (зависит от расстояния, размера, материала, значит является расчетным), некоторые мишени могут быть движущимися, что влияет на шанс попадания по цели. 
- Количество мишеней на стрельбище генерируется случайным образом, при этом их варианты генерируется случайным образом и хранятся так, что работа с ними не зависит от их реального типа.
- Каждая мишень имеет параметр предельного количества попаданий, который определяет после какого количества выстрелов мишень разрушается и перестает быть доступной для стрельбы.
- Любая цель должна иметь следующие методы
  - Предоставления шанс попадания по цели
  - Получение урона, принимает в себя количество попаданий
  - Предоставление доступности для дальнейшей стрельбы

Требуется:
1. Реализовать класс стрельбища, на котором будет находится оружие и мишени.
2. Реализовать интерфейсный или абстрактный класс мишени и несколько конкретных классов мишеней. Каждый класс должен иметь свои характеристики, которые могут пересекаться с другими классами, но должна быть хотя бы 1 уникальная, которая будет влиять на расчет шанса попадания, а также разный порог попаданий.
3. (На половину баллов) Продемонстрировать работу стрельбища и мишеней.
4. (Усложненный вариант) Провести симуляцию стрельбы из оружия по мишени в течении 1 минуты. Скорострельность одиночного режима и режима стрельбы очередями генерировать для оружия перед началом симуляции, при это в процессе режим стрельбы может изменится с некоторым шансом определяемым разработчиком.
5. (Усложненный вариант) В конце вывести количество разрушенных мишеней, количество оставшихся, средний урон, нанесенный по мишеням.

### Вариант 2

Вам необходимо реализовать некоторое количество классов оружий которые будут тестироваться пользователем на стрельбище с целью его подбора. При этом:
- У каждого оружия есть свой магазин и вариант его перезарядки со своим временем требуемым на его перезарядку
- пистолет перезаряжается быстро, простым изъятием магазина и вставкой нового
- однозарядная винтовка, перезаряжается по 1 патрону
- помповый дробовик имеет несъемный магазин и поэтому перезаряжается по 1 патрону до заполнения всего магазина
- дробовики и винтовки со съемными магазинами перезаряжаются подобно пистолетам
- Каждое оружие имеет следующие характеристики:  как калибр, количество патронов, количество режимов стрельбы, вес, прицельная дальность стрельбы, отдельные экземпляры кучность стрельбы, количество устанавливаемых модификаций.
- Шанс попадания по мишени зависит исключительно от расстояния до нее и характеристик самого оружия, так дробовик имеет практически 0 вероятность попасть в мишень в полукилометре, пистолет на том же расстоянии имеет незначительный шанс попадания, штурмовая винтовка средние шансы, а снайперская винтовка очень приличные шансы. В итоге шанс зависит от прицельной дальности стрельбы конкретного оружия. Формулу расчета шанса попадания требуется придумать, так чтобы она описывалась графиком в котором точка максимальной прицельной дальности стрельбы соответствовала бы 100% шансу попадания из этого оружия, а дальше резко падала в зависимости от расстояния,  для этого можно использовать обратную экспоненты, для которой точка 0.1 будет прицельной дальностью, а дальше будет резко падать но никогда не приблизится к 0.
- Шанс попадания каждый последующим выстрелом для режима стрельбы очередями должен падать.
- Любое оружие должно предоставлять следующие методы:
  - Зарядка магазина, на вход принимается количество патронов на выходе выдается время зарядки, при этом количество патроном не должно превышать максимальный объем магазина, но может быть меньше.
  - Стрельба по мишени одним из режимов стрельбы, при этом оружие на вход получает мишень, а на выходе выдает количество попаданий по цели
  - Вывод характеристик оружия
Требуется:
1. Реализовать класс стрельбища на котором будет находится оружие и мишени одного типа на разном расстоянии от стрелка.
2. Реализовать интерфейсный или абстрактный класс оружия и несколько его конечных вариантов.
3. (На половину баллов) Продемонстрировать работу стрельбища и оружий.
4. (Усложненный вариант) Провести симуляцию проверки работоспособности оружия стрелком, при проверки работоспособности оружия, требуется вывести информацию о нем, а также провести стрельбы на все расстояния, по каждой мишени требуется совершить по 100 выстрелов и замерить среднюю скорострельность в минуту(с учетом времени перезарядки на все выстрелы) и точность на каждое из доступных расстояний мишеней. 
5. (Усложненный вариант) В конце симуляции вывести собранную статистику по всем оружиям.


### Вариант 3

Вам необходимо реализовать механизм проверяемого ввода данных с потока ввода.
При этом:
- Существует интерфейсный класс ввода который будет иметь только 1 метод:
  - Считывание с потока ввода >>
- Существует интерфейсный класс валидатора, который будет иметь только 1 метод:
  - Проверка считанного значения(принимает в себя значение)
- Существует несколько классов считывания значений для типов: int, double, bool, string, char, array[N, type] (для считывания массива должны использоваться другие считыватели). Нужно реализовать не менее трех считывателей для разных типов. При этом у каждого ввода должен быть строго определен свой формат, если формат не соблюден считывание должен повторятся до тех пор пока пользователь не прервет его вводом какого либо спец символа(выбираем на свое усмотрение, можно например CTRL+D признак конца ввода).
- Существует несколько классов валидаторов например проверка больше меньше какого либо значения, проверка на формат строки, проверка на соответствие определенному символу.
- Весь процесс считывания тогда будет выглядеть следующим образом, из потока ввода считываем данные в класс считыватель который проверяет их на соответствие типу, если не возникает ошибки ввода, тогда вызывается проверка на соответствие дополнительным правилам, которые заранее подаются в считыватель при помощи конструктора.
- Считыватель может принимать в качестве аргумента конструктора параметр определяющий реакцию на ошибку ввода, который будет при своем наличии требовать немедленного завершения программы в случае ошибки. 
Требуется:
1. Реализовать интерфейсные класс считывателя, а также несколько конечных реализаций(Считывание строки, целого числа, плавающей запятой, символа).
2. (На половину баллов) Продемонстрировать работу считывателей данных, считав некоторый набор информации из консоли.
3. (Усложненный вариант) Реализовать интерфейсный класс валидатора, а также несколько конечных реализаций(Проверка на максимальную длину строки, максимальное/минимально значение числа, символа из предустановленного набора)
4. (Усложненный вариант) Реализовать конвейер считывания информации, в котором будет производиться последовательное считывание из потока ввод нескольких данных разного формата с разным набором дополнительных проверок.
5. (Усложненный вариант) Провести тестовое считывание данных из файлов (с ошибкой (аварийное завершение программы) и без ошибок) и из стандартного потока ввода с ошибками при повторяющемся ввода.

Пример переопределения операторов считывания
```cpp
#include <istream>

class Reader {
  public:
    void read(istream& in) = 0;
    friend istream& operator>>(istream& in, Reader* r);
    friend istream& operator>>(istream& in, Reader& r);
}

istream& operator>>(istream& in, Reader* r){
  r.read(in);
  return in;
}
istream& operator>>(istream& in, Reader& r){
  return in >> &r;
}

```

Пример использования:
```cpp
int result = 0;
vector<Validator> validators {MaxValidator(100)};
IntReader* reader = new IntReader(result, *validators));
reader.addValidator(MinValidator(10));
cin » reader;
```
```
В консоли:
Введите значение с типом int(min 10, max 100):
-1
Значение должно быть больше 10. Повторите ввод:
101
Значение должно быть меньше 100. Повторите ввод:
c
Введено значение неподходящего типа. Повторите ввод:
99
```

### Вариант 4

Вам необходимо реализовать пошаговый бой персонажей на клеточном поле квадратной формы.
При этом:
- Существует квадратное поле N на N.
- По его краям располагаются две группы бойцов.
- Боец имеют кол-во здоровья, броня(1-20), бонусный урон(1-8) и бонус инициативы, дальность хода.
- Бойцы занимают одну клетку на поле.
- Существует несколько типов бойцов, лучники обладают дистанционной атакой на большое расстояние(10 клеток), маги обладают атакой по площади(радиус 1 клетку от точки удара) на среднее расстояние(5 клеток), войны обладают большим запасом прочности и атакуют на ближнем расстоянии(1 клетка). 
- Во время боя порядок хода определяется инициативой бойцов (Инициатива существ определяется в диапазоне от 1 до 20 перед началом боя).
- Боец атакует всегда ближайшего к нему противника до тех пор, пока противник не будет иметь 0 жизней. Если вокруг противника нет места для атаки, атакуется следующий по расстоянию противник.
- Для атаки бойцу ближнего боя требуется подойти к противнику.
- За один ход существо может либо 1 раз атаковать врага, либо выполнить перемещение к врагу.
- Урон нанесенный бойцу вычисляется как случайное значение в диапазоне от 1 до 20 + бонусный урон - броня противника(в отрицательную сторону уйти не может)

Требуется:
1. Реализовать абстрактный класс бойца со всеми необходимыми параметрами и методами.
2. Реализовать конкретные реализации бойцов.
3. (На половину баллов) Продемонстрировать взаимодействия бойцов друг с другом в рамках боя 1 на 1.
4. (Усложненный вариант) Реализовать моделирование сражения двух групп из M бойцов, имеющих сбалансированный состав по следующему соотношению: 50% ближний бой, 30% дальний бой, 20% маги, на поле N на N клеток. Бой вести до полной победы одной группы над другой.
5. (Усложненный вариант) По результатам моделирования показать боевой путь каждого бойца группы и подсчитать статистически данные, которые отражают бой и его результаты(требуется самостоятельно определить какие параметры будут описывать бой).